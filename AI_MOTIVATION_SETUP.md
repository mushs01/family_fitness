# AI 동기부여 메시지 설정 가이드

## 🤖 기능 소개

가족 구성원의 개인별 운동 데이터를 분석하여 Hugging Face AI가 맞춤형 동기부여 메시지를 생성합니다.

### ✨ 주요 기능
- **개인 맞춤 분석**: 이번주, 지난주, 이번달 운동 횟수 비교
- **가족 비교**: 가족 평균 대비 개인 성과 분석  
- **실시간 AI 메시지**: 운동 패턴에 따른 개인화된 응원 메시지
- **데모 모드**: API 키 없이도 스마트한 메시지 생성

## 🔧 Hugging Face API 설정 (무료)

### 1. 계정 생성
1. [Hugging Face](https://huggingface.co/) 웹사이트 방문
2. "Sign Up" 클릭하여 무료 계정 생성
3. 이메일 인증 완료

### 2. API 토큰 발급
1. 로그인 후 [Settings > Access Tokens](https://huggingface.co/settings/tokens) 이동
2. "New token" 버튼 클릭
3. 토큰 이름 입력 (예: "family-fitness-ai")
4. 권한을 "Read" 선택 (무료 Inference API 사용)
5. "Generate a token" 클릭
6. 생성된 토큰 복사 (예: `hf_abcd1234efgh5678...`)

### 3. 앱에 API 키 적용

`webapp/app.js` 파일에서 다음 라인을 수정:

```javascript
// 수정 전
const HUGGINGFACE_API_KEY = 'hf_YOUR_API_KEY';

// 수정 후 (본인의 토큰으로 교체)
const HUGGINGFACE_API_KEY = 'hf_abcd1234efgh5678...';
```

## 📊 분석 데이터

### 개인 운동 통계
- **이번 주**: 최근 7일간 완료한 운동 횟수
- **지난 주**: 7~14일 전 완료한 운동 횟수  
- **이번 달**: 최근 30일간 완료한 운동 횟수
- **가족 평균**: 이번주 가족 전체 평균 운동 횟수

### AI 메시지 생성 조건
1. **운동 증가**: 지난주보다 이번주 운동이 많을 때
2. **운동 감소**: 지난주보다 이번주 운동이 적을 때
3. **평균 이상**: 가족 평균보다 많이 운동할 때
4. **평균 이하**: 가족 평균보다 적게 운동할 때

## 🎯 AI 프롬프트 예시

```
한국어로 답변해주세요. 
아빠는 지난주(3회)보다 이번주(1회) 운동이 줄었습니다. 
가족 평균(2.5회)보다 적게 운동하고 있습니다. 
이번달 총 8회 운동했습니다. 
아빠에게 따뜻하고 격려하는 운동 동기부여 메시지를 50자 이내로 생성해주세요.
```

## 🔄 동작 방식

### 데모 모드 (API 키 없음)
- 운동 데이터 분석 기반 스마트 메시지 선택
- 운동 패턴에 따른 적절한 응답 제공
- 다양한 동기부여 메시지 풀에서 랜덤 선택

### AI 모드 (API 키 설정됨)
- Hugging Face Inference API 호출
- 개인별 운동 데이터를 AI가 분석
- 완전히 맞춤화된 동기부여 메시지 생성

## 💡 메시지 예시

### 운동 증가 시
- "정말 열심히 하고 계시네요! 이 페이스 유지해보세요! 🏆"
- "꾸준히 늘어가는 모습이 보기 좋아요! 💪"

### 운동 감소 시  
- "괜찮아요! 다시 시작하면 돼요. 조금씩 늘려가봐요! 💪"
- "쉬어가는 것도 필요해요. 천천히 다시 시작해봐요! 🌱"

### 가족 평균 이상
- "가족 중에서도 모범이시네요! 정말 대단해요! 🌟"
- "다른 가족들에게도 좋은 영향을 주고 있어요! 👏"

### 가족 평균 이하
- "천천히 해도 괜찮아요. 꾸준함이 더 중요해요! 🐢"
- "작은 변화부터 시작해봐요. 할 수 있어요! ✨"

## 🚀 고급 기능

### 자동 새로고침
- 운동 기록 변경 시 자동으로 새 메시지 생성
- 프로필 전환 시 개인별 맞춤 메시지 표시

### 실시간 통계
- 이번주/지난주/이번달 운동 횟수 실시간 표시
- 가족 내 상대적 위치 분석

### 에러 처리
- API 호출 실패 시 자동으로 데모 모드로 전환
- 네트워크 오류에도 안정적인 메시지 제공

## 📱 사용법

1. **개인 프로필 선택**: 원하는 가족 구성원 카드 클릭
2. **AI 메시지 확인**: 운동 관리 화면 상단의 "AI 코치의 한마디" 확인
3. **수동 새로고침**: 🔄 버튼 클릭으로 새로운 메시지 생성
4. **통계 확인**: 메시지 하단의 이번주/지난주/이번달 운동 횟수 확인

## 🔒 보안 및 개인정보

- **로컬 처리**: 모든 운동 데이터는 브라우저에서만 처리
- **API 통신**: 분석된 통계만 AI API로 전송 (개인정보 미포함)
- **데이터 보호**: 개인 이름과 구체적인 운동 내용은 AI로 전송되지 않음

## 💰 비용

- **Hugging Face Inference API**: 월 30,000 토큰 무료
- **예상 사용량**: 메시지 1개당 약 100토큰 (월 300개 메시지 생성 가능)
- **가족 4명 기준**: 충분한 무료 사용량

현재 사용량으로는 **완전 무료**로 이용 가능합니다! 🎉
